[
    ["print", "--- TEST POO : RPG ---"],

    ["comment", "1. Définition de la classe Player"],
    ["class", "Player", ["name", "hp"], {
        "introduce": [ 
            [], 
            [
                ["print", "I am ", ["get_attr", ["get", "this"], "name"], " with ", ["get_attr", ["get", "this"], "hp"], " HP."]
            ] 
        ],
        "take_damage": [ 
            ["amount"], 
            [
                ["set", "current_hp", ["get_attr", ["get", "this"], "hp"]],
                ["set", "new_hp", ["-", ["get", "current_hp"], ["get", "amount"]]],
                ["set_attr", ["get", "this"], "hp", ["get", "new_hp"]],
                ["print", ["get_attr", ["get", "this"], "name"], " took damage! HP is now ", ["get", "new_hp"]]
            ] 
        ],
        "heal": [
            [],
            [
                ["set_attr", ["get", "this"], "hp", 100],
                ["print", "Fully healed!"]
            ]
        ]
    }],

    ["comment", "2. Instanciation"],
    ["set", "hero", ["new", "Player", "Conan", 100]],
    ["set", "monster", ["new", "Player", "Goblin", 50]],

    ["comment", "3. Appel de méthodes"],
    ["call_method", ["get", "hero"], "introduce"],
    ["call_method", ["get", "monster"], "introduce"],

    ["print", "\n--- FIGHT START ---"],
    ["call_method", ["get", "hero"], "take_damage", 10],
    ["call_method", ["get", "monster"], "take_damage", 999],
    
    ["print", "\n--- AFTERMATH ---"],
    ["call_method", ["get", "hero"], "heal"],
    ["call_method", ["get", "hero"], "introduce"]
]